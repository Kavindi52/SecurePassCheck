<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecurePassCheck • Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.1/echarts.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0f;
            --surface: #111118;
            --surface-elevated: #16161f;
            --accent: #7c3aed;
            /* violet */
            --accent-light: #a78bfa;
            --teal: #2dd4bf;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --border: #1e293b;
            --danger: #f87171;
            --warning: #fbbf24;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px -8px rgba(124, 58, 237, 0.18);
        }

        .card-accent {
            border-top: 3px solid var(--accent);
        }

        .stat-number {
            font-family: 'Roboto Mono', monospace;
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-light);
            margin-bottom: 1.25rem;
            letter-spacing: -0.025em;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: var(--accent-light);
            transform: translateY(-1px);
        }

        .btn-outline {
            border: 1px solid var(--accent);
            color: var(--accent);
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            transition: all 0.2s ease;
        }

        .btn-outline:hover {
            background: rgba(124, 58, 237, 0.1);
        }

        .progress-bg {
            background: #1e293b;
            border-radius: 9999px;
            height: 1.25rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 9999px;
            background: linear-gradient(90deg, var(--accent), var(--teal));
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            color: #000;
        }

        .rec-card {
            border-left: 4px solid var(--accent);
            background: var(--surface-elevated);
        }

        .rec-warning {
            border-left-color: var(--warning);
        }

        .rec-danger {
            border-left-color: var(--danger);
        }
    </style>
</head>

<body class="antialiased">

    <!-- Top Navigation -->
    <nav class="border-b border-gray-800/70 bg-black/40 backdrop-blur-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <span
                        class="text-2xl font-bold tracking-tight bg-gradient-to-r from-violet-400 to-teal-400 bg-clip-text text-transparent">
                        SecurePassCheck
                    </span>
                </div>

                <div class="hidden md:flex items-center gap-10 text-sm font-medium">
                    <a href="index.html" class="text-gray-400 hover:text-white transition">Home</a>
                    <a href="strength.html" class="text-gray-400 hover:text-white transition">Strength</a>
                    <a href="vault.html" class="text-gray-400 hover:text-white transition">Vault</a>
                    <a href="dashboard.html" class="text-violet-400 font-semibold">Dashboard</a>
                </div>

                <div class="md:hidden">
                    <button class="text-gray-400 hover:text-white">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8 py-10 lg:py-14">

        <header class="mb-12 text-center lg:text-left">
            <h1 class="text-4xl lg:text-5xl font-bold tracking-tight mb-3">Security Dashboard</h1>
            <p class="text-lg text-gray-400">Your password health • Vault statistics • Actionable insights</p>
        </header>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-5 mb-14">
            <div class="card p-6 text-center card-accent">
                <div class="stat-number" id="total-passwords">0</div>
                <div class="mt-2 text-sm text-gray-400 uppercase tracking-wide">Total Passwords</div>
            </div>
            <div class="card p-6 text-center">
                <div class="stat-number" id="strong-passwords">0</div>
                <div class="mt-2 text-sm text-gray-400 uppercase tracking-wide">Strong</div>
            </div>
            <div class="card p-6 text-center">
                <div class="stat-number" id="avg-strength">0<span class="text-2xl">%</span></div>
                <div class="mt-2 text-sm text-gray-400 uppercase tracking-wide">Avg Strength</div>
            </div>
            <div class="card p-6 text-center">
                <div class="stat-number" id="security-score">0</div>
                <div class="mt-2 text-sm text-gray-400 uppercase tracking-wide">Security Score</div>
            </div>
        </div>

        <!-- Charts -->
        <div class="grid lg:grid-cols-2 gap-8 mb-14">
            <div class="card p-6">
                <h3 class="section-title">Password Strength Breakdown</h3>
                <div id="strength-chart" style="height: 360px;"></div>
            </div>
            <div class="card p-6">
                <h3 class="section-title">Vault Activity (Last 7 Days)</h3>
                <div id="timeline-chart" style="height: 360px;"></div>
            </div>
        </div>

        <!-- Security Score -->
        <div class="card p-8 mb-14">
            <h3 class="section-title">Overall Security Score</h3>
            <div class="progress-bg">
                <div id="security-progress" class="progress-fill" style="width:0%">0%</div>
            </div>
            <div class="flex justify-between text-xs text-gray-500 mt-3 px-1">
                <span>Poor</span><span>Weak</span><span>Moderate</span><span>Good</span><span>Excellent</span>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="mb-14">
            <h3 class="section-title">Security Recommendations</h3>
            <div id="recommendations-container" class="grid md:grid-cols-2 gap-6"></div>
        </div>

        <!-- Quick Actions -->
        <div class="card p-8 text-center">
            <h3 class="section-title">Quick Actions</h3>
            <div class="flex flex-wrap justify-center gap-4 mt-6">
                <a href="strength.html" class="btn-primary">Analyze New Password</a>
                <a href="vault.html" class="btn-primary">Add to Vault</a>
                <button onclick="exportData()" class="btn-outline">Export Vault</button>
                <button onclick="generateReport()" class="btn-outline">Generate Report</button>
            </div>
        </div>

    </main>

    <script>
        // ─── Data & Logic (kept almost same, just adjusted visuals) ───
        let dashboardData = {
            totalPasswords: 0,
            strongPasswords: 0,
            averageStrength: 0,
            securityScore: 0,
            passwordHistory: []
        };

        function loadDashboardData() {
            const history = JSON.parse(localStorage.getItem('passwordHistory') || '[]');
            dashboardData.passwordHistory = history;
            dashboardData.totalPasswords = history.length;

            if (history.length > 0) {
                const strengths = history.map(item => Math.min(100, item.originalLength * 8 + (item.method === 'aes' ? 12 : 0)));
                dashboardData.strongPasswords = strengths.filter(s => s >= 70).length;
                dashboardData.averageStrength = Math.round(strengths.reduce((a, b) => a + b, 0) / strengths.length);
                dashboardData.securityScore = Math.round(
                    dashboardData.averageStrength * 0.75 +
                    (dashboardData.strongPasswords / dashboardData.totalPasswords) * 25
                );
            }
            updateDashboard();
        }

        function updateDashboard() {
            document.getElementById('total-passwords').textContent = dashboardData.totalPasswords;
            document.getElementById('strong-passwords').textContent = dashboardData.strongPasswords;
            document.getElementById('avg-strength').textContent = dashboardData.averageStrength;
            document.getElementById('security-score').textContent = dashboardData.securityScore;

            const pb = document.getElementById('security-progress');
            pb.style.width = dashboardData.securityScore + '%';
            pb.textContent = dashboardData.securityScore + '%';

            animateNumbers();
            updateStrengthChart();
            updateTimelineChart();
            generateRecommendations();
        }

        function animateNumbers() {
            const els = [
                { id: 'total-passwords', target: dashboardData.totalPasswords },
                { id: 'strong-passwords', target: dashboardData.strongPasswords },
                { id: 'security-score', target: dashboardData.securityScore }
            ];
            els.forEach(({ id, target }) => {
                let cur = 0;
                const inc = target / 50;
                const t = setInterval(() => {
                    cur += inc;
                    if (cur >= target) { cur = target; clearInterval(t); }
                    document.getElementById(id).textContent = Math.floor(cur);
                }, 20);
            });
        }

        function updateStrengthChart() {
            const chart = echarts.init(document.getElementById('strength-chart'));
            const isMobile = window.innerWidth < 768;

            const data = [
                { name: 'Very Weak', value: Math.floor(dashboardData.totalPasswords * 0.12), itemStyle: { color: '#ef4444' } },
                { name: 'Weak', value: Math.floor(dashboardData.totalPasswords * 0.23), itemStyle: { color: '#f97316' } },
                { name: 'Medium', value: Math.floor(dashboardData.totalPasswords * 0.28), itemStyle: { color: '#eab308' } },
                { name: 'Strong', value: Math.floor(dashboardData.totalPasswords * 0.22), itemStyle: { color: '#06b6d4' } },
                { name: 'Very Strong', value: dashboardData.strongPasswords, itemStyle: { color: '#8b5cf6' } }
            ];

            chart.setOption({
                backgroundColor: 'transparent',
                tooltip: { trigger: 'item', confine: isMobile, backgroundColor: 'rgba(15,15,25,0.95)', borderColor: '#7c3aed' },
                series: [{
                    type: 'pie',
                    radius: isMobile ? ['40%', '68%'] : ['48%', '70%'],
                    center: ['50%', '50%'],
                    data,
                    label: {
                        color: '#e2e8f0',
                        formatter: isMobile ? '{b}\n{d}%' : '{b}  {d}%',
                        fontSize: isMobile ? 12 : 14
                    },
                    labelLine: { length: isMobile ? 6 : 10, length2: isMobile ? 4 : 8 }
                }]
            });
        }

        function updateTimelineChart() {
            const chart = echarts.init(document.getElementById('timeline-chart'));
            const isMobile = window.innerWidth < 768;
            const { dates, counts } = generateTimelineData();

            chart.setOption({
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', confine: isMobile, backgroundColor: 'rgba(15,15,25,0.95)', borderColor: '#7c3aed' },
                grid: { left: isMobile ? '12%' : '8%', right: '5%', top: '15%', bottom: '18%' },
                xAxis: {
                    type: 'category',
                    data: dates,
                    axisLabel: { color: '#94a3b8', fontSize: isMobile ? 11 : 13, interval: isMobile ? 'auto' : 0 }
                },
                yAxis: {
                    type: 'value',
                    axisLabel: { color: '#94a3b8', fontSize: isMobile ? 11 : 13 }
                },
                series: [{
                    name: 'Added',
                    type: 'bar',
                    data: counts,
                    itemStyle: { color: '#7c3aed' },
                    barWidth: isMobile ? '45%' : '35%',
                    emphasis: { itemStyle: { color: '#a78bfa' } }
                }]
            });
        }

        function generateTimelineData() {
            const dates = [], counts = [];
            for (let i = 6; i >= 0; i--) {
                const d = new Date(); d.setDate(d.getDate() - i);
                dates.push(d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                const start = new Date(d); start.setHours(0, 0, 0, 0);
                const end = new Date(d); end.setHours(23, 59, 59, 999);
                const cnt = dashboardData.passwordHistory.filter(h => {
                    const t = new Date(h.timestamp);
                    return t >= start && t <= end;
                }).length;
                counts.push(cnt);
            }
            return { dates, counts };
        }

        function generateRecommendations() {
            const container = document.getElementById('recommendations-container');
            const recs = [];

            if (dashboardData.totalPasswords === 0) {
                recs.push({ type: '', title: 'Vault is empty', desc: 'Start building your secure vault by analyzing passwords.', action: 'Analyze Password' });
            } else if (dashboardData.strongPasswords < dashboardData.totalPasswords * 0.6) {
                recs.push({ type: 'warning', title: 'Improve weak passwords', desc: `${dashboardData.totalPasswords - dashboardData.strongPasswords} passwords are below recommended strength.`, action: 'Review Vault' });
            }

            if (dashboardData.securityScore < 70) {
                recs.push({ type: 'danger', title: 'Security score needs attention', desc: 'Focus on stronger passwords and modern encryption.', action: 'Improve Now' });
            }

            recs.push({ type: '', title: 'Regular security audit', desc: 'Best practice is to review your vault every 30–60 days.', action: 'Learn More' });
            recs.push({ type: '', title: 'Backup your vault', desc: 'Always keep an encrypted export in a safe location.', action: 'Export Vault' });

            container.innerHTML = recs.map(r => `
                <div class="rec-card ${r.type ? 'rec-' + r.type : ''} p-6 rounded-xl">
                    <h4 class="font-semibold text-lg mb-2">${r.title}</h4>
                    <p class="text-gray-400 mb-4">${r.desc}</p>
                    <span class="text-sm font-medium text-violet-400 hover:text-violet-300 cursor-pointer">${r.action} →</span>
                </div>
            `).join('');
        }

        function exportData() {
            const data = {
                exportDate: new Date().toISOString(),
                totalPasswords: dashboardData.totalPasswords,
                securityScore: dashboardData.securityScore,
                passwordHistory: dashboardData.passwordHistory.map(item => ({
                    id: item.id,
                    method: item.method,
                    timestamp: item.timestamp,
                    originalLength: item.originalLength
                }))
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = `securepasscheck-vault-${new Date().toISOString().split('T')[0]}.json`; a.click();
            URL.revokeObjectURL(url);
        }

        function generateReport() {
            const txt = `SecurePassCheck Security Report ─ ${new Date().toLocaleString()}

SUMMARY
  Total passwords     : ${dashboardData.totalPasswords}
  Strong passwords    : ${dashboardData.strongPasswords}
  Average strength    : ${dashboardData.averageStrength}%
  Overall score       : ${dashboardData.securityScore}/100

RECOMMENDATIONS
  • Replace weak & reused passwords
  • Prefer AES-256 encryption when available
  • Schedule monthly vault reviews
  • Enable 2FA / passkeys wherever possible
`;
            const blob = new Blob([txt], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = `securepasscheck-report-${new Date().toISOString().split('T')[0]}.txt`; a.click();
            URL.revokeObjectURL(url);
        }

        window.addEventListener('DOMContentLoaded', loadDashboardData);
        window.addEventListener('resize', () => {
            updateStrengthChart();
            updateTimelineChart();
        });
    </script>
</body>

</html>